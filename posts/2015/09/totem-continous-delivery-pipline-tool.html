<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
  <head>
    <title>Totem: continous delivery pipline tool - ownport.github.io/notes</title>
    <meta name="google-site-verification" content="LmB1dDy5ueSqYPVOs6z4ylRQgNDxelgPYHsRLLtCG7c" />
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <link href="http://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css" rel="stylesheet" />
    <!--<link href="//maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap-theme.min.css" rel="stylesheet" />-->
    <link href="http://maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet" />
    <link href="http://ownport.github.io/notes/theme/style.css" rel="stylesheet" />
    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-65731833-1', 'auto');
      ga('send', 'pageview');

    </script>
  </head>
  <body id="index" class="archive">
    <!--[if lt IE 7]>
        <p class="browsehappy">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</p>
    <![endif]-->
    <nav class="navbar navbar-default" role="navigation">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target=".navbar-collapse">
          <span class="sr-only">Toggle navigation</span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="http://ownport.github.io/notes">ownport.github.io/notes</a>
        </div>
        <div class="collapse navbar-collapse navbar-right">
          <ul class="nav navbar-nav">
            <li><a href="http://ownport.github.io/notes/pages/search.html">Search</a></li>
            <li><a href="http://ownport.github.io/notes/tags.html">tags</a></li>
          </ul>
        </div>
        <!-- /.navbar-collapse -->
      </div>
    </nav>
    <div class="container">
    <section id="content" class="article content">
      <header>
        <h2 class="entry-title">
          Totem: continous delivery pipline tool
        </h2>
        
        <div class="text-muted">Tue 08 September 2015</div>
      </header>
<!-- .entry-content -->
      <div class="entry-content">
        <p>Totem is continous delivery pipline tool which is aimed in simplifying delivery of the code for stateless application to any environment. Under the hood, it utilizes containerization tools and technology (<a href="https://www.docker.com/">Docker</a>).</p>
<p>It was specifically designed for micro services/frameworks by utilizing practices and patterns that are used for deploying the same (<a href="http://jeffkreeftmeijer.com/2010/why-arent-you-using-git-flow/">gitflow</a>, service discovery, containerization, centralized logging, and more...)</p>
<h3>Architecture: High Level flow</h3>
<ul>
<li>Developer commits file to git and pushes the changes to scm (e.g: <a href="https://github.com/">github</a>)</li>
<li>Github triggers webhooks for push events to image builder tool e.g: "<a href="https://github.com/totem/docker-image-factory">Image Factory</a>" and CI tools like <a href="https://travis-ci.org/">Travis</a>, <a href="https://www.atlassian.com/software/bamboo">Bamboo</a>.</li>
<li>Once travis (or any other ci) build and image builder build finishes it notifies <a href="https://github.com/totem/cluster-orchestrator">orchestrator</a> about the status using post build webhooks.</li>
<li>Orchestrator on receving any hook, loads/caches the configuration for the build (totem.yml). This file is loaded from <a href="http://aws.amazon.com/s3/">Amazon S3</a> (or <a href="https://coreos.com/using-coreos/etcd/">etcd</a>).</li>
<li>Orchestrator on receving all the hooks with status as "success", it invokes deployer api to deploy the built image to <a href="https://coreos.com/">CoreOS cluster</a>.</li>
<li>Deployer creates <a href="https://coreos.com/using-coreos/clustering">fleet</a> unit files for the application and submits the job to fleet daemon (running on CoreOS cluster). On successul deploy, deployer promotes the current deployment by updating the yoda proxy configuration stored in etcd.</li>
</ul>
<h3>Components</h3>
<p>The "Totem Ecosystem" comprises of several components each responsible to perform discrete set of jobs. One may choose to deploy some/all of the components in Totem , depending upon his/her needs. It is also possible to have additional components for deploying applications using Totem (for e.g.: sidekicks for registering with SkyDNS)</p>
<ul>
<li><a href="https://github.com/totem/docker-image-factory">Image Factory</a>: Responsible for building docker images using "Dockerfile" and push these to a central registry (e.g: Quay)</li>
<li><a href="https://github.com/totem/cluster-orchestrator">Orchestrator</a>: Responsible for consuming hooks from different services (like Travis, Image Factory etc) and creating deployment requests to Deployers for configured clusters.</li>
<li><a href="https://github.com/totem/cluster-deployer">Deployer</a>: Schedules the deployment to a cluster (currently CoreOS) and sets up the proxy hosts/listeners.</li>
<li><a href="https://github.com/totem/yoda-proxy">Yoda Proxy</a>: Dynamic Haproxy backed by etcd.</li>
<li><a href="https://github.com/totem/yoda-discover">Yoda Discover</a>: Acts as side kick for registering application unit to yoda proxy using etcd as backing store. Also provides ability to register yoda hosts to etcd.</li>
<li><a href="https://github.com/totem/yoda-discover">Yoda Route53</a>: Registers the yoda hosts with Amazon Route 53 for DNS based load balancing for hosts.</li>
<li><a href="https://github.com/totem/fleet-templates">Fleet Templates</a>: Jinja based fleet unit files that gets deployed to CoreOS cluster. Some of the default templates are already provided, but one may choose to have his/her own custom templates.</li>
</ul>
<h3>Links</h3>
<ul>
<li><a href="http://totem.github.io/">Totem</a> </li>
</ul>
      </div>
<!-- /.entry-content -->
      <footer class="post-info text-muted">
        <button type="button" class="btn btn-default">          
          <a href="http://ownport.github.io/notes/category/articles.html"><div class="fa fa-lg fa-folder-open"></div> articles</a>
        </button>
        <button type="button" class="btn btn-default">
          <a href="http://ownport.github.io/notes/tag/totem.html"><div class="fa fa-lg fa-tag"></div> totem</a>
        </button>
        <button type="button" class="btn btn-default">
          <a href="http://ownport.github.io/notes/tag/continous-delivery.html"><div class="fa fa-lg fa-tag"></div> continous delivery</a>
        </button>
        <button type="button" class="btn btn-default">
          <a href="http://ownport.github.io/notes/tag/docker.html"><div class="fa fa-lg fa-tag"></div> docker</a>
        </button>
        <button type="button" class="btn btn-default">
          <a href="http://ownport.github.io/notes/tag/deployment.html"><div class="fa fa-lg fa-tag"></div> deployment</a>
        </button>
      </footer>
      <!-- /.post-info -->
    </section>
    </div>
    <footer class="footer">
      <div class="container">
        <p class="footer-text">&copy; <a href="http://ownport.github.io/notes">ownport.github.io/notes</a> powered by <a href="http://getpelican.com/">pelican</a> and <a href="http://nodotcom.org">nikhil (customized)</a></p>
      </div>
    </footer>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
    <script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js"></script>
  </body>
</html>