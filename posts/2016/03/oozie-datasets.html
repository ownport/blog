<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
  <head>
    <title>Oozie Datasets - ownport.github.io/notes</title>
    <meta name="google-site-verification" content="LmB1dDy5ueSqYPVOs6z4ylRQgNDxelgPYHsRLLtCG7c" />
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <link href="http://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css" rel="stylesheet" />
    <!--<link href="//maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap-theme.min.css" rel="stylesheet" />-->
    <link href="http://maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet" />
    <link href="http://ownport.github.io/notes/theme/style.css" rel="stylesheet" />
    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-65731833-1', 'auto');
      ga('send', 'pageview');

    </script>
  </head>
  <body id="index" class="archive">
    <!--[if lt IE 7]>
        <p class="browsehappy">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</p>
    <![endif]-->
    <nav class="navbar navbar-default" role="navigation">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target=".navbar-collapse">
          <span class="sr-only">Toggle navigation</span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="http://ownport.github.io/notes">ownport.github.io/notes</a>
        </div>
        <div class="collapse navbar-collapse navbar-right">
          <ul class="nav navbar-nav">
            <li><a href="http://ownport.github.io/notes/pages/search.html">Search</a></li>
            <li><a href="http://ownport.github.io/notes/tags.html">tags</a></li>
          </ul>
        </div>
        <!-- /.navbar-collapse -->
      </div>
    </nav>
    <div class="container">
    <section id="content" class="article content">
      <header>
        <h2 class="entry-title">
          Oozie Datasets
        </h2>
        
        <div class="text-muted">Fri 11 March 2016</div>
      </header>
<!-- .entry-content -->
      <div class="entry-content">
        <h3>Datasets</h3>
<p>Lecture notes, <a href="https://www.packtpub.com/big-data-and-business-intelligence/apache-oozie-essentials">Apache Oozie Essentials</a> </p>
<p>A Dataset is a collection of data, which is identified by some logical name. For example, the press release can be defined as follows:</p>
<div class="highlight"><pre><span></span><span class="nt">&lt;dataset</span> <span class="na">name=</span><span class="s">&quot;pressrelease&quot;</span> 
    <span class="na">frequency=</span><span class="s">&quot;${coord:days(1)}&quot;</span> 
    <span class="na">initial-instance=</span><span class="s">&quot;2015-08-15T00:00Z&quot;</span> 
    <span class="na">timezone=</span><span class="s">&quot;Australia/Sydney&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;uri-template&gt;</span>
            {nameNode}/learn_oozie/ch04/input/pressrelease/${YEAR}/${MONTH}/${DAY}
        <span class="nt">&lt;/uri-template&gt;</span>
    <span class="nt">&lt;done-flag&gt;</span>_SUCCESS<span class="nt">&lt;/done-flag&gt;</span>
<span class="nt">&lt;/dataset&gt;</span>
</pre></div>


<p>The logical name is resolved by filling the values of the YEAR, MONTH, and DAY variables. The data in Dataset is immutable and produced at regular intervals with defined frequency; in the preceding example, it is one day ( coord:days(1) ). We will see it in detail in the Frequency and time section.</p>
<p>Datasets (note plural) is a group of individual datasets. They are defined once in the Hadoop platform and those definitions can be reused among any number of coordinator jobs. For example, we define the Dataset pressrelease , specify that it comes once a day, and tell that it can be found with a path represented by <uri-template> . In the same way, we can define other Datasets like job postings, public interactions, and so on.</p>
<p>Since the Datasets is a collection of datasets, they can be represented by a collection of individual Datasets and include file representation. </p>
<p>As best practice for organizing data inside a cluster, you will represent them as Dataset and store all the logical datasets.xml files in one place on HDFS so that all Coordinator jobs can reuse them.</p>
<p>Dataset definition needs the following details:</p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Definition</th>
<th>Example</th>
</tr>
</thead>
<tbody>
<tr>
<td>name</td>
<td>Dataset name</td>
<td>pressrelease</td>
</tr>
<tr>
<td>frequency</td>
<td>Indicates time in minutes at which data is created and frequency uses EL expressions to represent time</td>
<td>${coord:days(1)</td>
</tr>
<tr>
<td>initial-instance</td>
<td>The UTC date and time of the initial instance of the Dataset</td>
<td>2015-08-15T00:00Z</td>
</tr>
<tr>
<td>timezone</td>
<td>The timezone of the Dataset</td>
<td>Australia/Sydney</td>
</tr>
<tr>
<td>url-template</td>
<td>The URI template that identifies  the Dataset is made up of constants ( YEAR ) and variables</td>
<td YEAR="YEAR">namenode/learn_oozie/ch04/input/pressrelase/</td>
</tr>
<tr>
<td>done-flag</td>
<td>instance is ready to be consumed</td>
<td>_SUCCESS file</td>
</tr>
</tbody>
</table>
<h4>The <done-flag> tag</h4>
<p>The <code>&lt;done-flag&gt;</code> tag indicates when a dataset instance is ready to be processed. Here are the various options for <code>&lt;done-flag&gt;</code>:</p>
<ul>
<li>If the <done-flag> tag is not present, the Coordinator will not start till the file named _SUCCESS is present in the directory. In our file-based  load use case the process that is copying the files to HDFS will also create the _SUCCESS flag using the <code>hdfs fs -touchz</code> command.</li>
<li>If the <done-flag> tag is there but the tag is empty as <done-flag></done-flag>, then the directory (if present) gives a signal to the Coordinator that the Dataset is ready.</li>
<li>If the <done-flag> tag is there but has some filename, Oozie will check for the presence of the file with given name in the tag in the directory, for example, if the filename is <done-flag>_DATA_LOAD_DONE</done-flag>, Oozie will check the existence of the file _DATA_LOAD_DONE.</li>
</ul>
      </div>
<!-- /.entry-content -->
      <footer class="post-info text-muted">
        <button type="button" class="btn btn-default">          
          <a href="http://ownport.github.io/notes/category/articles.html"><div class="fa fa-lg fa-folder-open"></div> articles</a>
        </button>
        <button type="button" class="btn btn-default">
          <a href="http://ownport.github.io/notes/tag/hadoop.html"><div class="fa fa-lg fa-tag"></div> hadoop</a>
        </button>
        <button type="button" class="btn btn-default">
          <a href="http://ownport.github.io/notes/tag/bigdata.html"><div class="fa fa-lg fa-tag"></div> bigdata</a>
        </button>
        <button type="button" class="btn btn-default">
          <a href="http://ownport.github.io/notes/tag/oozie.html"><div class="fa fa-lg fa-tag"></div> oozie</a>
        </button>
        <button type="button" class="btn btn-default">
          <a href="http://ownport.github.io/notes/tag/dataset.html"><div class="fa fa-lg fa-tag"></div> dataset</a>
        </button>
      </footer>
      <!-- /.post-info -->
    </section>
    </div>
    <footer class="footer">
      <div class="container">
        <p class="footer-text">&copy; <a href="http://ownport.github.io/notes">ownport.github.io/notes</a> powered by <a href="http://getpelican.com/">pelican</a> and <a href="http://nodotcom.org">nikhil (customized)</a></p>
      </div>
    </footer>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
    <script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js"></script>
  </body>
</html>